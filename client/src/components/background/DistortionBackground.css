/* Main container */
.distortion-background-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  overflow: hidden;
  background-color: #0f0514;
}

/* Gradient background with animation */
.gradient-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #0f0514 0%, #1a0b2e 50%, #0f0514 100%);
  background-size: 200% 200%;
  animation: gradientAnimation 15s ease infinite;
  z-index: 0;
}

@keyframes gradientAnimation {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Particles backdrop */
.particles-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 1;
  pointer-events: none;
}

/* Individual particles styled in JS */
.bg-particle {
  position: absolute;
  border-radius: 50%;
  z-index: 1;
  pointer-events: none;
}

/* TV Scan lines effect */
.scanlines-effect {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  pointer-events: none;
  overflow: hidden;
}

.scanline-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    to bottom,
    transparent 50%,
    rgba(0, 0, 0, 0.3) 51%
  );
  background-size: 100% 4px;
  z-index: 2;
  pointer-events: none;
  opacity: 0.25;
  animation: scanAnimation 8s linear infinite;
}

/* Additional real scan lines */
.scanline-overlay::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    rgba(0, 0, 0, 0) 0px,
    rgba(0, 0, 0, 0.05) 1px,
    rgba(0, 0, 0, 0.1) 2px,
    rgba(0, 0, 0, 0.05) 3px,
    rgba(0, 0, 0, 0) 4px
  );
  background-size: 100% 4px;
  animation: moveScanlines 1s linear infinite;
}

@keyframes moveScanlines {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(4px);
  }
}

@keyframes scanAnimation {
  0% {
    transform: translateY(0);
    opacity: 0.15;
  }
  50% {
    opacity: 0.25;
  }
  100% {
    transform: translateY(4px);
    opacity: 0.15;
  }
}

/* TV static noise effect */
.tv-static-effect {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  opacity: 0.03;
  z-index: 3;
  pointer-events: none;
  animation: staticNoise 0.5s steps(10) infinite;
}

/* Glitch effect that appears occasionally */
.tv-glitch-effect {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(139, 92, 246, 0.05);
  opacity: 0;
  pointer-events: none;
  z-index: 4;
  animation: glitchAnimation 3s linear infinite;
}

/* CRT vignette effect - darkens the edges */
.crt-vignette {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.5) 100%);
  opacity: 0.4;
  z-index: 5;
  pointer-events: none;
}

/* Dithering pattern - creates a grid pattern effect */
.dither-pattern {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M1 0H0V1H1V0ZM3 0H2V1H3V0ZM1 2H0V3H1V2ZM3 2H2V3H3V2Z' fill='white' fill-opacity='0.05'/%3E%3C/svg%3E");
  background-size: 4px 4px;
  z-index: 6;
  opacity: 0.15;
  pointer-events: none;
}

/* Animation for the static noise */
@keyframes staticNoise {
  0% { background-position: 0% 0%; }
  20% { background-position: 20% -20%; }
  40% { background-position: -20% 20%; }
  60% { background-position: 40% 10%; }
  80% { background-position: -30% 30%; }
  100% { background-position: 0% 0%; }
}

/* Animation for the glitch effect */
@keyframes glitchAnimation {
  0%, 90%, 100% {
    opacity: 0;
    transform: translate(0);
    background: rgba(139, 92, 246, 0.05);
  }
  92% {
    opacity: 0.8;
    transform: translate(-5px, 5px);
    background: rgba(139, 92, 246, 0.1);
  }
  94% {
    opacity: 0.4;
    transform: translate(5px, -2px);
    background: rgba(16, 255, 0, 0.15);
  }
  96% {
    opacity: 0.6;
    transform: translate(-2px, -5px);
    background: rgba(236, 72, 153, 0.1);
  }
}

/* Controls UI for distortion settings */
.distortion-controls {
  position: fixed;
  top: 5px;
  right: 5px;
  z-index: 50;
}

.controls-panel {
  background-color: rgba(17, 24, 39, 0.7);
  backdrop-filter: blur(8px);
  padding: 1.5rem;
  border-radius: 0.75rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(107, 114, 128, 0.5);
  transition: all 0.3s ease-in-out;
  width: 18rem;
  transform: translateY(-200%);
  opacity: 0;
  /* Uncomment to show controls */
  /* transform: translateY(0);
  opacity: 1; */
}

/* Select element styling for the controls */
select {
  background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23DDDDDD%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
  background-repeat: no-repeat;
  background-position: right 0.75rem top 50%;
  background-size: 0.65em auto;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* Media query for smaller screens */
@media (max-width: 640px) {
  .controls-panel {
    width: 15rem;
    padding: 1rem;
  }
}